<!-- Header -->
<app-header
  [userName]="'Izumi!'"
  [userRole]="'Collector'"
  [notificationCount]="1"
></app-header>

<div class="title-bar">
  <img
    src="assets/back.svg"
    alt="Kembali"
    class="back-button"
    routerLink="/member/loans"
  />
  <h3>Pengajuan Pinjaman</h3>
</div>

<ion-content class="loan-application-page" fullscreen>
  <!-- Content Section -->
  <div class="content-section">
    <!-- Loan Application Form -->
    <div class="loan-form">
      <!-- Nominal Pinjaman -->
      <div class="form-group">
        <label class="form-label">Nominal Pinjaman</label>
        <div class="dropdown-wrapper">
          <select class="form-select">
            <option value="">Select Amount</option>
            <option value="500000">Rp500.000</option>
            <option value="1000000">Rp1.000.000</option>
            <option value="2000000">Rp2.000.000</option>
            <option value="3000000">Rp3.000.000</option>
            <option value="5000000">Rp5.000.000</option>
          </select>
          <ion-icon name="chevron-down" class="dropdown-icon"></ion-icon>
        </div>
      </div>

      <!-- Tanggal Pengajuan -->
      <div class="form-group">
        <label class="form-label">Tanggal Pengajuan</label>
        <div class="input-container">
          <ion-input
            class="custom-outline date-input"
            id="tanggalPengajuanInput"
            readonly
            [value]="selectedDate"
            placeholder="--/--/--"
            (click)="openDatePicker()"
          >
            <ion-icon
              name="calendar-outline"
              slot="end"
              class="calendar-icon"
              (click)="openDatePicker()"
            >
            </ion-icon>
          </ion-input>
          <ion-modal
            [isOpen]="showDatePicker"
            [initialBreakpoint]="0.5"
            [breakpoints]="[0, 0.25, 0.5, 0.75, 1]"
            (didDismiss)="showDatePicker = false"
            class="date-picker-modal"
            [cssClass]="'custom-modal'"
          >
            <ng-template>
              <ion-content class="ion-padding">
                <div class="date-modal-header">
                  <h3>Pilih Tanggal Pengajuan</h3>
                </div>
                <ion-datetime
                  presentation="date"
                  [showDefaultButtons]="true"
                  [preferWheel]="true"
                  doneText="Pilih"
                  cancelText="Batal"
                  (ionChange)="setDateValue($event)"
                  (ionCancel)="showDatePicker = false"
                >
                </ion-datetime>
              </ion-content>
            </ng-template>
          </ion-modal>
        </div>
      </div>

      <!-- Jangka Waktu -->
      <div class="form-group">
        <label class="form-label">Jangka Waktu</label>
        <div class="dropdown-wrapper">
          <select class="form-select">
            <option value="">Select Duration</option>
            <option value="1">1 Bulan (Jangka Pendek)</option>
            <option value="3">3 Bulan</option>
          </select>
          <ion-icon name="chevron-down" class="dropdown-icon"></ion-icon>
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="submit-section">
      <ion-button
        (click)="onLoanSubmissionSuccess()"
        class="btn-ajukan"
        fill="solid"
        >Ajukan Pinjaman</ion-button
      >
    </div>
  </div>

  <!-- Loan Success Modal -->
  <div
    class="verification-overlay"
    [ngClass]="{'show-overlay': showLoanSuccess}"
  >
    <div class="verification-modal">
      <div class="loan-success-icon">
        <img src="assets/checkmark.svg" alt="Success" />
      </div>
      <h2>PENGAJUAN PINJAMAN BERHASIL DIBUAT!</h2>
    </div>
  </div>
</ion-content>
