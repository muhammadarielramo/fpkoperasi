<!-- Header -->
<app-header></app-header>

<ion-content class="dashboard-page" fullscreen>
  <!-- Pull-to-refresh -->
  <ion-refresher slot="fixed" (ionRefresh)="loadDashboardData($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- Tampilkan loading spinner -->
  <div *ngIf="isLoading" class="ion-text-center ion-padding">
    <ion-spinner name="crescent" style="transform: scale(1.5); margin-top: 50%;"></ion-spinner>
  </div>

  <!-- Tampilkan konten utama jika tidak loading -->
  <div *ngIf="!isLoading" class="content-section">
    <!-- Swipeable Cards -->
    <div class="swipeable-cards">
      <swiper-container pager="false" slides-per-view="1.1" space-between="10">
        <!-- Simpanan Wajib -->
        <swiper-slide>
          <div class="card saldo">
            <div class="card-content">
              <div class="icon-title">
                <img src="assets/wallet.svg" alt="Wallet" class="card-icon" />
                <h3>Simpanan Wajib</h3>
              </div>
              <div class="amount">{{ savings.total_wajib | currency:'IDR':'Rp':'1.0-0' }}</div>
            </div>
            <img src="assets/piggy-bank.svg" alt="Saldo Simpanan" class="card-illustration"/>
          </div>
        </swiper-slide>

        <!-- Simpanan Pokok -->
        <swiper-slide>
          <div class="card saldo">
            <div class="card-content">
              <div class="icon-title">
                <img src="assets/wallet.svg" alt="Wallet" class="card-icon" />
                <h3>Simpanan Pokok</h3>
              </div>
              <div class="amount">{{ savings.total_pokok | currency:'IDR':'Rp':'1.0-0' }}</div>
            </div>
            <img src="assets/piggy-bank.svg" alt="Saldo Simpanan" class="card-illustration"/>
          </div>
        </swiper-slide>

        <!-- Simpanan Sukarela -->
        <swiper-slide>
          <div class="card saldo">
            <div class="card-content">
              <div class="icon-title">
                <img src="assets/wallet.svg" alt="Wallet" class="card-icon" />
                <h3>Simpanan Sukarela</h3>
              </div>
              <div class="amount">{{ savings.total_sukarela | currency:'IDR':'Rp':'1.0-0' }}</div>
            </div>
            <img src="assets/piggy-bank.svg" alt="Saldo Simpanan" class="card-illustration"/>
          </div>
        </swiper-slide>
      </swiper-container>
    </div>

    <!-- Total Pinjaman -->
    <div class="card pinjaman">
      <div class="card-content">
        <div class="pinjaman-content">
          <h3>Total Pinjaman Aktif</h3>
          <div class="amount">{{ totalLoan | currency:'IDR':'Rp':'1.0-0' }}</div>
        </div>
      </div>
      <div class="pinjaman-illustration">
        <img src="assets/calculator.svg" alt="Calculator" class="calculator" />
      </div>
    </div>

    <!-- Aksi Cepat -->
    <div class="quick-actions">
      <div class="action-button" routerLink="/member/loans/loan-application">
        <img src="assets/ajukan-pinjaman.svg" alt="Ajukan Pinjaman" />
        <span>Ajukan<br />Pinjaman</span>
      </div>
      <div class="action-button" routerLink="/member/histories">
        <img src="assets/riwayat-transaksi.svg" alt="Riwayat Transaksi" />
        <span>Riwayat<br />Transaksi</span>
      </div>
      <div class="action-button" routerLink="/member/savings">
        <img src="assets/lihat-slip-pembayaran.svg" alt="Lihat Slip Pembayaran" />
        <span>Lihat Slip<br />Pembayaran</span>
      </div>
    </div>

    <!-- Floating Bantuan -->
    <div class="help-floating">
        <!-- Konten bantuan tetap sama -->
    </div>
  </div>
</ion-content>
